<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="estilo.css">
        <meta charset="UFT-8">
        <meta name="viewport" content="width-device-width,inicitial-scale=1.8">
        <title>Juego</title>
    </head>
    <body>
        <div class="container">
            <div class="bar">
                <h1>Juego del Gatito</h1>
                <div class="estado">
                    <span id="ganador" style="color: dodgerblue;"></span>
                    <br>
                    <span id="jugador1"></span>
                    <br>
                    <br>
                    <span id="ganador2"></span>
                    <br> 
                    <br>
                    <span id="Empate"></span>                     
                </div>
            </div>
        <br>
        <main id="contenedor">
            <div class="espaciojuego">
                <div class="cuadrado" id="1"></div>
                <div class="cuadrado" id="2"></div>
                <div class="cuadrado" id="3"></div>
                <div class="cuadrado" id="4"></div>
                <div class="cuadrado" id="5"></div>
                <div class="cuadrado" id="6"></div>
                <div class="cuadrado" id="7"></div>
                <div class="cuadrado" id="8"></div>
                <div class="cuadrado" id="9"></div>
            </div>
            <div class="accion">
                <button id="reiniciar"><strong>Reiniciar</strong></button>
            </div>
        </main>
        </div>

<script>
    const botones = document.querySelectorAll(".cuadrado");
    
    let turnoX = true;
    let jugando = true;
    let movimientos = 0;

    let puntosX = 0, puntosO = 0, empates = 0;

    const combos = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
    ];

    function actualizarMarcadores() {
        document.querySelector("#jugador1").textContent = "Juegos ganados de X: " + puntosX;
        document.querySelector("#ganador2").textContent = "Juegos ganados de O: " + puntosO;
        document.querySelector("#Empate").textContent = "Juegos con Empates: " + empates;
    }

    function revisarGanador() {
        for (let c of combos) {
            let [a, b, d] = c;

            if (botones[a].textContent &&
                botones[a].textContent === botones[b].textContent &&
                botones[a].textContent === botones[d].textContent) {

                jugando = false;
                return botones[a].textContent; 
            }
        }

        if (movimientos === 9) return "E";
        return null;
    }

    botones.forEach(boton => {
        boton.addEventListener("click", () => {
            if (boton.textContent === "" && jugando) {

                boton.textContent = turnoX ? "X" : "O";
                movimientos++;

                let resultado = revisarGanador();

                if (resultado === "X") {
                    document.querySelector("#ganador").textContent = "¡GANADOR: X!";
                    puntosX++;
                    actualizarMarcadores();
                }
                else if (resultado === "O") {
                    document.querySelector("#ganador").textContent = "¡GANADOR: O!";
                    puntosO++;
                    actualizarMarcadores();
                }
                else if (resultado === "E") {
                    document.querySelector("#ganador").textContent = "¡EMPATE!";
                    empates++;
                    actualizarMarcadores();
                }

                turnoX = !turnoX;
            }
        });
    });

    document.querySelector("#reiniciar").addEventListener("click", () => {
        jugando = true;
        turnoX = true;
        movimientos = 0;
        document.querySelector("#ganador").textContent = "";
        botones.forEach(b => b.textContent = "");
    });

    actualizarMarcadores();
</script>
</body>
</html>
